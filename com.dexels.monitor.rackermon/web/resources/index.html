<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
	
	<!-- title and meta -->
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1.0" />
	<meta name="description" content="A simple responsive navigation menu using HTML, CSS, and a bit of jQuery." />
	<title>Dexels Server Monitor</title>
	
	<!-- css -->
	<link href='http://fonts.googleapis.com/css?family=Ubuntu:300,400,700,400italic' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
	<link href="css/dexelsmonitor.css" rel="stylesheet"/>
	<link href="css/rackermon.css" rel="stylesheet"/>
	<link rel="stylesheet" href="css/chosen.css" type="text/css">
	
		<!-- js -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"  type="text/javascript"> </script>
	<script src="js/dexels/navi.js"       type="text/javascript" ></script>
	<script src="js/dexels/rackermon.js"       type="text/javascript" ></script>
	<script src="js/handlebars-v3.0.3.js" type="text/javascript" ></script>
</head>

<script id="content-template" type="text/x-handlebars-template">
<h2 class="title"> Status </h2>
<ul class="Groups">
    {{#each groups}} 
    <li class="Group Group{{status}} namespace" id="{{name}}-namespace">
        <div class="plus">{{#isHidden status name}} + {{else}} - {{/isHidden}} </div> {{name}} 
        <ul {{#isHidden status name}} style="display: none;" {{/isHidden}} class="Clusters">
            {{#each clusters}} 
            <div class="row">
                <div class="column-45">
                    <li class="Cluster Cluster{{status}}" > <div class="plus">{{#isHidden status name}} + {{else}} - {{/isHidden}}</div> {{name}}
                        <ul {{#isHidden status name}} style="display: none;" {{/isHidden}} class="Servers">
                        {{#each servers}}
							<button id="{{name}}-monitor-btn" class="monitor-btn" type="button"><a href="{{endPoint}}/system/console/bundles" target="_blank">System Console</a></button>
                            <li class="Server Server{{status}}" id="{{name}}"><div class="plus">{{#isHidden status name}} + {{else}} - {{/isHidden}}</div>     {{name}}
                                <ul {{#isHidden status name}} style="display: none;" {{/isHidden}} class="CheckResults">
                                    {{#each checkResults}}
                                    <div class="CheckResult CheckResult{{status}}"> {{checkName}}: {{rawResult}}  </div>				
                                    {{/each}}
                                </ul>
                            </li>
						{{/each}}
                        </ul>
                    </li>
                </div>
                    <div class="column-10">
                        <button id="{{name}}-btn" class="rbutton" type="button">Perform rolling restart</button>
                    </div>
					{{#each deployments}} 
						{{isRestarting restartInProgress clusterName ../name}}
					{{/each}}
                </div>
            {{/each}}
        </ul>
    </li>
{{/each}}


</script>


<script id="alerts-template" type="text/x-handlebars-template">
<h2 class="title"> Alerts </h2>
{{#each alerts}} 
	<div class="alert">{{this}}</div>
{{/each}}
</script>

<script id="replication-template" type="text/x-handlebars-template">
<h2 class="title"> Replication </h2>
<ul>
{{#each tenants}} 
    <li class="Group Group_{{@key}} namespace" id="{{@key}}-topics-namespace">
	<div class="plus">{{#isHidden status name}} + {{else}} - {{/isHidden}} </div> {{@key}} 
		<ul>
			{{#each deployments}}
				<div class="plus">{{#isHidden status name}} + {{else}} - {{/isHidden}} </div> {{@key}} regular topics: [{{this.nonGenerationaltopicCount}}]
				<li>
					<ul>
					{{#each generations}}
						<li>
						<div class="generation deletegeneration">{{@key}} [{{this.topicCount}}]</div>
						</li>
					{{/each}}
					</ul>
					
				</li>
			
			{{/each}}
		</ul>
	</li>
{{/each}}
</ul>
</script>

<body>
	
	<div id="wrapper">
		<header>
			<div id="title" class="container">
				<h1>RackerMon</h1>
			</div>
			<div class="faketabs">
					<div class="faketab" id="taboverview">Overview</div> 
					<div class="faketab" id="tabstatus">Status</div>
					<div class="faketab" id="tabalerts">Alerts</div>
					<div class="faketab" id="tabreplication">Replication</div>
				</div> 
		</header>
		<!-- /header -->


		<div id="main">
			<div class="container">
			</div>
			<div id="lastUpdate" style="float: right; margin-right: 50px;">
				Last update:
				<div id="lastUpdateTime"></div>
			</div>
			<div id="content" class="content">
				<div id="shortstatus"></div>
				<div id="status" style="display: none"></div>
				<div id="alerts" style="display: none"></div>
				<div id="replication" style="display: none"></div>
			
			</div>
			
		</div>
		<!-- #main -->
	</div>
	<!-- /#wrapper -->

</body>
</html>