buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
}
plugins {
  id "com.intershop.gradle.javacc" version "4.0.0"
  id 'eclipse'
    id 'maven-publish'
}
apply from: 'gradle/dependencies.gradle'

allprojects {
    repositories {
        jcenter()
    }



}

subprojects {
    version  = rootProject.ext.floodplain_version
    apply plugin: "java"
	apply plugin: "eclipse"
	apply from: "$rootProject.projectDir/gradle/common.gradle"
    group = "io.floodplain"
    if (name == 'com.dexels.navajo.core') {
        apply plugin: 'com.intershop.gradle.javacc'
    }
    repositories {
        maven {
            name = "GitHubPackages"
            url = uri("https://maven.pkg.github.com/flood/REPOSITORY")
            credentials {
                username = project.findProperty("gpr.user") ?: System.getenv("USERNAME")
                password = project.findProperty("gpr.key") ?: System.getenv("TOKEN")
            }
        }
    }
    publishing {
        publications {
            "$project.name"(MavenPublication) {
                groupId = "io.floodplain"
                artifactId = project.name
                version = rootProject.ext.floodplain_version
                from components.java
            }
        }
    }

}


