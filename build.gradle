buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
}
plugins {
  id "com.intershop.gradle.javacc" version "4.0.0"
  id 'eclipse'
 }
apply from: 'gradle/dependencies.gradle'

allprojects {
    repositories {
        jcenter()
    }
}

subprojects {
    version  = rootProject.ext.floodplain_version
    apply plugin: "java"
	apply plugin: "eclipse"
    apply plugin: "maven-publish"
	apply from: "$rootProject.projectDir/gradle/common.gradle"
    group = "io.floodplain"
    if (name == 'com.dexels.navajo.core') {
        apply plugin: 'com.intershop.gradle.javacc'
    }

    publishing {
        publications {
            "$project.name"(MavenPublication) {
                groupId = "io.floodplain"
                artifactId = project.name
                version = rootProject.ext.floodplain_version
                from components.java
            }
        }
        repositories {
            maven {
                name = "GitHubPackages"
                url = uri("https://maven.pkg.github.com/floodplainio/floodplain-library")
                credentials {
                    username = project.findProperty("gpr.user") ?: System.getenv("GITHUB_USERNAME")
                    password = project.findProperty("gpr.key") ?: System.getenv("GITHUB_PACKAGES_PAN")
                }
            }
        }
    }

}

